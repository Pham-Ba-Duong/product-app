<% layout('layout', { title: 'Danh sách sản phẩm' }) %>
    <h1>Danh sách sản phẩm</h1>
    <a href="/products/new">Thêm sản phẩm</a>
    <form method="get" action="/products/search" style="display:inline; margin-left:1rem">
        <input name="q" placeholder="Tìm kiếm..." />
        <button>Tìm</button>
    </form>
    <div id="products">
        <% if (products.length===0) { %>
            <p>Không có sản phẩm</p>
            <% } else { %>
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Price</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% products.forEach(p=> { %>
                            <tr>
                                <td>
                                    <%= p.id %>
                                </td>
                                <td>
                                    <%= p.name %>
                                </td>
                                <td>
                                    <%= p.price %>
                                </td>
                                <td>
                                    <a href="/products/<%= p.id %>/edit">Edit</a>
                                    <form method="post" action="/products/<%= p.id %>/delete" style="display:inline">
                                        <button type="submit" onclick="return confirm('Bạn muốn xóa?')">Delete</button>
                                    </form>
                                </td>
                            </tr>
                            <% }) %>
                    </tbody>
                </table>
                <% } %>
    </div>